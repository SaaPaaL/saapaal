{% extends "base.html" %}
{% block title %}Ù„ÛŒØ³Øª Ú©Ø§Ø±Ù‡Ø§{% endblock %}
{% block content %}
<div class="card">
    <div class="controls">
        <form method="get" class="search-form">
            <input type="text" name="q" value="{{ q }}" placeholder="Ø¬Ø³ØªØ¬Ùˆ...">
            <button type="submit" class="btn">ğŸ” Ø¬Ø³ØªØ¬Ùˆ</button>
        </form>
        <a href="{{ url_for('todo_create') }}" class="btn">â• ØªØ³Ú© Ø¬Ø¯ÛŒØ¯</a>
    </div>

    <ul class="todo-list">
        {% for t in todos %}
        <li class="todo {% if t.done %}done{% endif %}">
            <h3>{{ t.title }}</h3>
            <p>{{ t.description or 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª' }}</p>
            <div class="meta">
                <span>ğŸ“… {{ t.deadline.strftime('%Y-%m-%d') if t.deadline else '---' }}</span>
                <span class="badge {{ t.priority }}">{{ t.priority }}</span>
                {% if t.done %}
                    <span>âœ… Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</span>
                {% else %}
                    <span>ğŸ•“ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…</span>
                {% endif %}
            </div>
            <div class="row">
                <form method="post" action="{{ url_for('todo_toggle', todo_id=t.id) }}">
                    <button class="action toggle" title="ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª">âœ”</button>
                </form>
                <a href="{{ url_for('todo_detail', todo_id=t.id) }}" class="action edit">Ø¬Ø²Ø¦ÛŒØ§Øª</a>
                <a href="{{ url_for('todo_edit', todo_id=t.id) }}" class="action edit">ÙˆÛŒØ±Ø§ÛŒØ´</a>
                <form method="post" action="{{ url_for('todo_delete', todo_id=t.id) }}">
                    <button class="action delete" onclick="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')">ğŸ—‘</button>
                </form>
            </div>
        </li>
        {% else %}
            <p class="text-muted">â›” Ù‡ÛŒÚ† Ú©Ø§Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
        {% endfor %}
    </ul>
</div>
{% endblock %}
