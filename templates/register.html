{% extends "base.html" %}
{% block title %}Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…{% endblock %}

{% block content %}
<div class="card">
    <h2>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</h2>
    <form method="post" class="mt-8" id="registerForm">
        <label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
        <input type="text" name="username" required>

        <label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
        <input type="password" name="password" id="password" required>
        <div id="strength-message" class="strength"></div>
        
        <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
        <input type="text" name="phone" id="phone">
        <small id="phoneError" style="color:red; display:none;"></small>

        <label>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯:</label>
        <input type="date" name="birthday" required>

        <label>Ú©Ø¯ Ù…Ù„ÛŒ:</label>
        <input type="text" name="national_id" required>

        <div class="mt-8">
            <button type="submit" class="btn">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            <a href="{{ url_for('login') }}" class="btn ghost">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ±ÙˆØ¯</a>
        </div>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const passwordInput = document.getElementById('password');
  const strengthMsg = document.getElementById('strength-message');

  passwordInput?.addEventListener('input', () => {
    const value = passwordInput.value;
    let strength = 0;

    if (value.length >= 8) strength++;              // Ø·ÙˆÙ„ Ú©Ø§ÙÛŒ
    if (/[A-Z]/.test(value)) strength++;            // Ø­Ø±ÙˆÙ Ø¨Ø²Ø±Ú¯
    if (/[a-z]/.test(value)) strength++;            // Ø­Ø±ÙˆÙ Ú©ÙˆÚ†Ú©
    if (/[0-9]/.test(value)) strength++;            // Ø¹Ø¯Ø¯
    if (/[^A-Za-z0-9]/.test(value)) strength++;     // Ú©Ø§Ø±Ø§Ú©ØªØ± Ø®Ø§Øµ

    if (value.length === 0) {
      strengthMsg.textContent = '';
      strengthMsg.style.color = '';
    } else if (strength <= 2) {
      strengthMsg.textContent = 'Ø±Ù…Ø² Ø¶Ø¹ÛŒÙ ğŸ˜•';
      strengthMsg.style.color = 'red';
    } else if (strength === 3 || strength === 4) {
      strengthMsg.textContent = 'Ø±Ù…Ø² Ù…ØªÙˆØ³Ø· ğŸ™‚';
      strengthMsg.style.color = 'orange';
    } else {
      strengthMsg.textContent = 'Ø±Ù…Ø² Ù‚ÙˆÛŒ ğŸ’ª';
      strengthMsg.style.color = 'green';
    }
  });
});
</script>
{% endblock %}
